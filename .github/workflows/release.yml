name: "Release"
on: workflow_dispatch

jobs:
  sonatype-release:
    name: "Github Packages Release"
    runs-on: macos-latest
    env:
      githubUsername: mparticle-bot
      githubToken: ${{ secrets.GITHUB_TOKEN }}
    steps:
      - name: "Checkout"
        uses: actions/checkout@v2
        with:
          submodules: recursive
      - name: "Install JDK 11"
        uses: actions/setup-java@v2
        with:
          distribution: "zulu"
          java-version: "11"
      - name: Install Cocoapods
        run: sudo gem install cocoapods; sudo gem install cocoapods-generate
      - name: "Publish Android To Github Repo"
        run: |
          ./gradlew publishAndroidDebugPublicationToGithubRepository
